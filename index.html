<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Echora Messenger</title>

    <meta name="description"
        content="Welcome to Echora world chat, but limited to a few users. Join a part of our small journey.">
    <meta property="og:title" content="Echora Messenger">
    <meta property="og:description" content="Join a part of our small journey">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>

    <style>
        /* Your entire CSS remains exactly the same */
    </style>
</head>

<body onclick="closeContext(); closeDrawerOutside(event)">

    <!-- Dialogue Overlay -->
    <div id="dialogue-overlay">
        <div class="dialogue-box">
            <h3 id="diag-title" style="color:var(--blue); margin-top:0;"></h3>
            <p id="diag-text" style="line-height:1.5;"></p>
            <button class="btn-full"
                style="width: 120px; margin-top:10px;"
                onclick="closeDiag()">OK</button>
        </div>
    </div>

    <!-- Preview Overlay -->
    <div id="preview-overlay">
        <div class="preview-tools">
            <i class="fa-solid fa-download" onclick="downloadPreview()"></i>
            <i class="fa-solid fa-xmark" onclick="closePreview()"></i>
        </div>
        <img id="preview-img" src="">
    </div>

    <!-- Context Menu -->
    <div id="context-menu">
        <div class="context-item" onclick="copyMessage()">
            <i class="fa-solid fa-copy" style="margin-right: 8px;"></i>
            Copy Text
        </div>
        <div class="context-item c-red" id="c-delete" onclick="deleteMessage()">
            <i class="fa-solid fa-trash" style="margin-right: 8px;"></i>
            Delete
        </div>
    </div>

    <!-- Splash Screen -->
    <div id="splash-screen">
        <i class="fa-solid fa-comment-dots"
            style="font-size: 80px; color: var(--blue);"></i>
        <h1 style="color: white; font-family: sans-serif; margin-top: 15px;">
            Echora
        </h1>
    </div>

    <!-- Drawer -->
    <div id="drawer">
        <h2 style="color:var(--blue);">Echora</h2>
        <p id="drawer-user"
            style="margin: -10px 0 15px 0; font-size: 14px; color: var(--blue-light);
                   border-bottom: 1px solid #1a3a5a; padding-bottom: 10px;">
        </p>

        <div onclick="toggleDrawer()" style="padding:15px; cursor:pointer;">
            <i class="fa-solid fa-house" style="margin-right:10px;"></i>
            Home
        </div>

        <div onclick="openDiag('About', 'Echora Messenger v3.1\nCreated by Kmrxz\nJoin a part of our small journey.')"
            style="padding:15px; cursor:pointer;">
            <i class="fa-solid fa-circle-info" style="margin-right:10px;"></i>
            About
        </div>

        <div onclick="toggleDrawer(); logout()"
            style="padding:15px; cursor:pointer; color:#f87171; margin-top:20px;">
            <i class="fa-solid fa-door-open" style="margin-right:10px;"></i>
            Logout
        </div>
    </div>

    <!-- Auth Screen -->
    <div id="auth-screen">

        <!-- Login Box -->
        <div class="auth-card" id="login-box">
            <!-- Same content, just cleanly indented -->
        </div>

        <!-- Signup Box -->
        <div class="auth-card hidden" id="signup-box">
            <!-- Same content, just cleanly indented -->
        </div>

    </div>

    <!-- Header -->
    <header>
        <span onclick="toggleDrawer()" style="font-size:24px; cursor:pointer;">
            <i class="fa-solid fa-bars"></i>
        </span>

        <b style="color:var(--blue); font-size: 20px;">
            Echora Chat
        </b>

        <div style="width:24px"></div>
    </header>

    <!-- Chat -->
    <div id="chat-box"></div>

    <!-- Footer -->
    <footer>
        <input type="file"
            id="media-upload"
            class="hidden"
            accept="image/*"
            onchange="uploadMedia(event)">

        <button class="btn-media"
            id="media-btn"
            onclick="document.getElementById('media-upload').click()">
            <i class="fa-solid fa-plus"></i>
        </button>

        <input type="text"
            id="msg-input"
            placeholder="Message...">

        <button class="btn-send" onclick="send()">
            <i class="fa-solid fa-paper-plane"></i>
        </button>
    </footer>

    <script>
        /* Your entire JS remains exactly the same.
           Only indentation cleaned and spacing fixed. */
    </script>

</body>
</html>
